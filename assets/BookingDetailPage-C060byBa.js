import{c as z,j as ce,k as O,ah as H,a as B,p as ve,h as f,ac as I,b as M,H as ye,I as pe,g as ge,W as Ve,$ as fe,ai as _e,r as D,o as be,aa as c,a2 as s,a4 as v,a3 as t,a5 as h,af as U,ag as k,a7 as a,a1 as V,ab as i,aj as C,ak as r,a6 as S,ad as q,al as ke,a8 as N,a9 as j}from"./index-CZwW8cOr.js";import{Q as he}from"./QItemLabel-DJqsCHHP.js";import{Q as Ue,B as Se}from"./statusMap-BSE7-8ke.js";import{Q as x}from"./QSelect-mD-YNdnA.js";import{Q as qe,a as xe,b as W}from"./QList-fhd9mqbp.js";import{Q as Ie}from"./QPage-BeCYOgXR.js";import{u as Be}from"./use-quasar-Dfk-N9mn.js";import{u as Re,B as A}from"./useBookingStore-4XUg210b.js";import{d as we}from"./pinia-6rcpwu4V.js";import"./format-w9l-hwmv.js";const Ce=z({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:n=>["left","right"].includes(n)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(n,{slots:m}){const p=ce(H,O);if(p===O)return console.error("QTimelineEntry needs to be child of QTimeline"),O;const _=B(()=>`q-timeline__entry q-timeline__entry--${n.side}`+(n.icon!==void 0||n.avatar!==void 0?" q-timeline__entry--icon":"")),Q=B(()=>`q-timeline__dot text-${n.color||p.color}`),l=B(()=>p.layout==="comfortable"&&p.side==="left");return()=>{const b=ve(m.default,[]);if(n.body!==void 0&&b.unshift(n.body),n.heading===!0){const d=[f("div"),f("div"),f(n.tag,{class:"q-timeline__heading-title"},b)];return f("div",{class:"q-timeline__heading"},l.value===!0?d.reverse():d)}let R;n.icon!==void 0?R=[f(I,{class:"row items-center justify-center",name:n.icon})]:n.avatar!==void 0&&(R=[f("img",{class:"q-timeline__dot-img",src:n.avatar})]);const w=[f("div",{class:"q-timeline__subtitle"},[f("span",{},M(m.subtitle,[n.subtitle]))]),f("div",{class:Q.value},R),f("div",{class:"q-timeline__content"},[f("h6",{class:"q-timeline__title"},M(m.title,[n.title]))].concat(b))];return f("li",{class:_.value},l.value===!0?w.reverse():w)}}}),Ne=z({name:"QTimeline",props:{...ye,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:n=>["left","right"].includes(n)},layout:{type:String,default:"dense",validator:n=>["dense","comfortable","loose"].includes(n)}},setup(n,{slots:m}){const p=ge(),_=pe(n,p.proxy.$q);Ve(H,n);const Q=B(()=>`q-timeline q-timeline--${n.layout} q-timeline--${n.layout}--${n.side}`+(_.value===!0?" q-timeline--dark":""));return()=>f("ul",{class:Q.value},M(m.default))}}),Ae=[{recordId:"rec_001",bookingId:"bk_001",petId:"pet_001",groomerId:"gr_001",services:["洗澡","全套美容"],photos:["/uploads/pet_001_before.jpg","/uploads/pet_001_after.jpg"],mood:"calm",skinCondition:"毛髮較乾，有少許打結，耳朵內側有輕微紅腫。\u2028",note:"整體狀況良好，毛髮打結部位已順利清理。建議下次多補充護毛素。\u2028",createdAt:"2025-06-04 15:10",nextBookingSuggestion:"2025-07-05"},{recordId:"rec_002",bookingId:"bk_003",petId:"pet_003",groomerId:"gr_002",services:["剪毛"],photos:["/uploads/pet_003_before.jpg","/uploads/pet_003_after.jpg"],mood:"aggressive",skinCondition:"皮膚無明顯異常，但貓咪因緊張抓咬，修剪後留意傷口，已進行消毒。\u2028",note:"剪毛過程中貓咪多次企圖抓人，建議下次使用防咬套或改約溫和時段。\u2028",createdAt:"2025-06-15 14:05",nextBookingSuggestion:"2025-07-15"},{recordId:"rec_003",bookingId:"bk_007",petId:"pet_012",groomerId:"gr_001",services:["全套美容","耳朵清潔"],photos:["/uploads/pet_012_before.jpg","/uploads/pet_012_after.jpg"],mood:"excited",skinCondition:"皮膚健康，無跳蚤或皮膚紅腫。毛髮豐厚，剪毛流暢。\u2028",note:"狗狗表現興奮，但未影響操作。下次可以嘗試延長間隔到 45 天。\u2028",createdAt:"2025-07-03 17:40",nextBookingSuggestion:"2025-08-01"}],Qe=we("groomingRecord",{state:()=>{let n=[];const m=localStorage.getItem("groomingRecords");if(m)try{n=JSON.parse(m),console.log("✅ Initialized groomingRecords from localStorage")}catch(p){console.error("❌ Failed to parse groomingRecords from localStorage:",p),n=[]}return(!n||n.length===0)&&(n=Ae.map(p=>({...p,services:Array.isArray(p.services)?p.services:[],photos:Array.isArray(p.photos)?p.photos:[],mood:p.mood??"calm",skinCondition:p.skinCondition??"",note:p.note??"",nextBookingSuggestion:p.nextBookingSuggestion??""})),localStorage.setItem("groomingRecords",JSON.stringify(n)),console.log("✅ Initialized groomingRecords from raw JSON")),{list:n,originList:n}},actions:{setList(n){this.list=n,localStorage.setItem("groomingRecords",JSON.stringify(this.list))},filterByPet(n){this.list=this.originList.filter(m=>m.petId===n)},createRecord(n){this.list.push(n),localStorage.setItem("groomingRecords",JSON.stringify(this.list))},updateRecord(n){const m=this.list.findIndex(p=>p.recordId===n.recordId);m!==-1&&(this.list[m]=n,localStorage.setItem("groomingRecords",JSON.stringify(this.list)))},deleteRecord(n){this.list=this.list.filter(m=>m.recordId!==n),localStorage.setItem("groomingRecords",JSON.stringify(this.list))},fetchRecordDetail(n){return this.list.find(m=>m.recordId===n)},fetchByPetId(n){return this.originList.filter(m=>m.petId===n).sort((m,p)=>p.createdAt.localeCompare(m.createdAt))}}}),Te={key:0,class:"col-4 row q-gutter-md justify-end"},je={class:"row q-col-gutter-x-lg"},De={class:"col-9"},Ee={class:"row q-col-gutter-md"},Oe={class:"col-6"},Me={class:"col-6"},$e={class:"col-6"},Le={class:"col-6"},Pe={class:"col-6"},Je={class:"col-6"},Fe={class:"text-subtitle1 q-mb-sm"},Ge={class:"row q-col-gutter-md"},We={class:"col-4"},ze={class:"col-4"},He={class:"col-4"},Ke={class:"col-12"},Ye={class:"col"},Xe={class:"col-3"},Ze={key:0},el={key:1},ll={key:0,class:"text-negative q-mt-md"},ol={class:"text-subtitle1 q-mb-sm"},tl={class:"col-12 text-subtitle2 text-weight-medium"},al={class:"col-4"},nl={class:"col-4"},dl={class:"col-4"},sl={class:"col-4"},ul={class:"col-4"},il={class:"col-4"},rl={class:"col-12"},ml={class:"col-12"},cl={class:"col-4"},vl={key:0,class:"col-8"},yl={class:"text-subtitle1 q-mb-sm"},pl={class:"col-12 text-subtitle2 text-weight-medium"},gl={class:"col-4"},Vl={class:"col-4"},fl={class:"col-4"},_l={class:"col-4"},bl={class:"col-4"},kl={class:"col-4"},hl={class:"col-12"},Ul={class:"col-12"},Sl={class:"col-4"},ql={key:0,class:"col-8"},xl={class:"text-subtitle1 q-mb-sm"},Il={class:"text-subtitle2 q-mb-xs"},Bl={class:"text-right text-caption text-grey q-mt-sm"},Rl={class:"row q-col-gutter-sm q-pt-xs"},wl={class:"q-mt-xs row q-col-gutter-sm"},Cl={class:"col-6"},Nl={class:"col-6"},Al={class:"text-subtitle1 q-mb-sm"},Ql={class:"row q-col-gutter-md"},Tl={class:"col-4"},jl={class:"col-4"},Dl={class:"col-4"},El={class:"col-6"},Ol={class:"col-6"},Kl=fe({__name:"BookingDetailPage",setup(n){const m=Be(),p=_e(),_=Re(),Q=Qe(),l=D(),b=p.params.id,R=D(l.value?.discount?.type||""),w=D(l.value?.discount?.amount||0);be(()=>{const y=_.fetchBookingDetail(b);l.value=y});const d=D(!0),$=[{label:"狗",value:"dog"},{label:"貓",value:"cat"},{label:"其他",value:"other"}],L=[{label:"公",value:"male"},{label:"母",value:"female"}],P=[{label:"是",value:!0},{label:"否",value:!1}],K=[{label:"現金",value:"現金"},{label:"信用卡",value:"信用卡"}],Y=[{label:"未付款",value:"unpaid"},{label:"已付款",value:"paid"}];function X(y){return l.value?.pet.find(o=>o.id===y)?.name||"未知寵物"}function Z(y){return Q.list.filter(o=>o.bookingId===y)}function ee(y){const o=Z(y.bookingId);return y.pet.map(e=>{const g=o.find(u=>u.petId===e.id)||null;return{pet:e,record:g}})}function le(y){return y.reduce((o,e)=>o+e.price,0)}const E=B(()=>l.value?.services?l.value.services.reduce((y,o)=>{const e=o.items.reduce((g,u)=>g+(u.price||0),0);return y+e},0):0),oe=B(()=>Number(w.value||0)),J=B(()=>Math.max(E.value-oe.value,0));function te(){_.updateBookingStatus(b,A.CONFIRMED),m.notify({type:"positive",message:"已確認預約",position:"top",timeout:2e3})}function ae(){m.dialog({title:"拒絕預約",message:"確定要拒絕這個預約嗎？",cancel:!0,persistent:!0}).onOk(()=>{_.updateBookingStatus(b,A.REJECTED),m.notify({type:"negative",message:"已拒絕預約",position:"top",timeout:2e3})})}function ne(){console.log(l.value),m.dialog({title:"確認儲存？",message:"你確定要儲存嗎？",cancel:!0,persistent:!0}).onOk(()=>{m.loading.show({message:"儲存中..."}),l.value&&(_.updateBookingDetail(b,l.value),d.value=!0,setTimeout(()=>{m.loading.hide(),m.notify({type:"positive",message:"儲存成功",position:"top",timeout:2e3})},1500))})}function de(){m.dialog({title:"取消預約",message:"確定要取消這個預約嗎？",cancel:!0,persistent:!0}).onOk(()=>{l.value&&l.value.status&&(l.value.status.cancelReason="寵物當下過度緊張不適合美容",_.updateBookingStatus(b,A.CANCELLED_BY_STORE),d.value=!0)})}function se(){d.value=!1,m.notify({type:"info",message:"編輯模式已開啟",position:"top",timeout:2e3})}function ue(){_.updateBookingStatus(b,A.ARRIVED),m.notify({type:"info",message:"已確認到店",position:"top"})}function ie(){_.updateBookingStatus(b,A.IN_SERVICE),m.notify({type:"info",message:"已確認開始服務",position:"top"})}function re(){_.updateBookingStatus(b,A.FINISHED),m.notify({type:"positive",message:"已完成服務",position:"top"})}function F(y){return(typeof y=="string"?new Date(y):y).toISOString().slice(0,10)}function G(y){const o=F(new Date),e=F(y);return o===e}function T(y){switch(y){case"completed":return"green-6";case"confirmed":return"info";case"cancelled":case"cancelledByCustomer":case"rejected":return"negative";case"waiting":return"light-blue-4";case"in_service":return"primary";case"pending":return"grey-6";default:return"secondary"}}function me(y){switch(y){case"created":return"建立預約";case"confirmed":return"確認預約";case"in_service":return"開始服務";case"waiting":return"等待服務";case"pending":return"等待確認";case"completed":return"服務完成";case"cancelled":return"店家取消";case"cancelledByCustomer":return"顧客取消";case"rejected":return"預約遭拒";default:return y}}return(y,o)=>(s(),c(Ie,{padding:""},{default:v(()=>[t(h,{color:"primary",icon:"chevron_left",label:"回上一頁",flat:"",dense:"",onClick:y.$router.back},null,8,["onClick"]),t(U,{class:"q-pa-lg q-mx-auto"},{default:v(()=>[t(k,{class:"row"},{default:v(()=>[o[21]||(o[21]=a("div",{class:"col-8"},[a("div",{class:"text-h6"},"訂單詳情")],-1)),l.value?(s(),V("div",Te,[l.value?.status.value==="created"?(s(),c(h,{key:0,label:"接單",type:"submit",color:"info",onClick:te})):i("",!0),l.value?.status.value==="created"?(s(),c(h,{key:1,label:"拒絕",type:"submit",color:"negative",onClick:ae})):i("",!0),G(l.value.date)&&l.value?.status.value==="confirmed"?(s(),c(h,{key:2,label:"到店",type:"submit",color:T("arrived"),onClick:ue},null,8,["color"])):i("",!0),G(l.value.date)&&l.value?.status.value==="arrived"?(s(),c(h,{key:3,label:"美容去",type:"submit",color:T("in_service"),onClick:ie},null,8,["color"])):i("",!0),l.value?.status.value==="in_service"?(s(),c(h,{key:4,label:"完成",type:"submit",color:T("finished"),onClick:re},null,8,["color"])):i("",!0),d.value?(s(),c(h,{key:5,label:"編輯",type:"submit",color:"primary",onClick:se})):i("",!0),d.value?i("",!0):(s(),c(h,{key:6,label:"儲存",type:"submit",color:"primary",onClick:ne})),l.value?.status.value!=="cancelled_by_customer"&&l.value?.status.value!=="created"&&l.value?.status.value!=="rejected"&&l.value?.status.value!=="finished"?(s(),c(h,{key:7,label:"取消",type:"submit",color:"secondary",outline:"",onClick:de})):i("",!0)])):i("",!0)]),_:1,__:[21]}),t(C),t(k,null,{default:v(()=>[a("div",je,[a("div",De,[t(U,{flat:""},{default:v(()=>[t(k,{class:"q-pa-none"},{default:v(()=>[a("div",Ee,[a("div",Oe,[l.value?(s(),c(r,{key:0,label:"預約編號",modelValue:l.value.bookingId,"onUpdate:modelValue":o[0]||(o[0]=e=>l.value.bookingId=e),readonly:"",dense:"",outlined:""},null,8,["modelValue"])):i("",!0)]),a("div",Me,[l.value?(s(),c(r,{key:0,label:"預約來源",modelValue:l.value.source,"onUpdate:modelValue":o[1]||(o[1]=e=>l.value.source=e),readonly:d.value,dense:"",outlined:""},null,8,["modelValue","readonly"])):i("",!0)]),a("div",$e,[l.value?(s(),c(r,{key:0,label:"預約日期",modelValue:l.value.date,"onUpdate:modelValue":o[2]||(o[2]=e=>l.value.date=e),readonly:d.value,dense:"",outlined:""},null,8,["modelValue","readonly"])):i("",!0)]),a("div",Le,[l.value?(s(),c(r,{key:0,label:"預約時間",modelValue:l.value.time,"onUpdate:modelValue":o[3]||(o[3]=e=>l.value.time=e),readonly:d.value,dense:"",outlined:""},null,8,["modelValue","readonly"])):i("",!0)]),a("div",Pe,[l.value?(s(),c(r,{key:0,label:"建立時間",modelValue:l.value.createdAt,"onUpdate:modelValue":o[4]||(o[4]=e=>l.value.createdAt=e),readonly:d.value,dense:"",outlined:""},null,8,["modelValue","readonly"])):i("",!0)]),a("div",Je,[l.value?(s(),c(r,{key:0,label:"更新時間",modelValue:l.value.updatedAt,"onUpdate:modelValue":o[5]||(o[5]=e=>l.value.updatedAt=e),readonly:d.value,dense:"",outlined:""},null,8,["modelValue","readonly"])):i("",!0)]),l.value?(s(),c(r,{key:0,label:"訂單備註",modelValue:l.value.note,"onUpdate:modelValue":o[6]||(o[6]=e=>l.value.note=e),readonly:d.value,type:"textarea",class:"col-12",autogrow:"",outlined:""},null,8,["modelValue","readonly"])):i("",!0)])]),_:1})]),_:1}),a("div",null,[t(U,{flat:""},{default:v(()=>[t(k,{class:"q-px-none"},{default:v(()=>[a("div",Fe,[t(I,{name:"person",class:"q-mr-xs"}),o[22]||(o[22]=S("顧客資訊 "))]),a("div",Ge,[a("div",We,[l.value?(s(),c(r,{key:0,label:"姓名",modelValue:l.value.customer.name,"onUpdate:modelValue":o[7]||(o[7]=e=>l.value.customer.name=e),readonly:d.value,dense:"",outlined:""},null,8,["modelValue","readonly"])):i("",!0)]),a("div",ze,[l.value?(s(),c(r,{key:0,label:"電話",modelValue:l.value.customer.phone,"onUpdate:modelValue":o[8]||(o[8]=e=>l.value.customer.phone=e),readonly:d.value,dense:"",outlined:""},null,8,["modelValue","readonly"])):i("",!0)]),a("div",He,[l.value?(s(),c(r,{key:0,label:"Email",modelValue:l.value.customer.email,"onUpdate:modelValue":o[9]||(o[9]=e=>l.value.customer.email=e),readonly:d.value,dense:"",outlined:""},null,8,["modelValue","readonly"])):i("",!0)]),a("div",Ke,[l.value?(s(),c(r,{key:0,label:"聯絡備註",modelValue:l.value.customer.note,"onUpdate:modelValue":o[10]||(o[10]=e=>l.value.customer.note=e),readonly:d.value,type:"textarea",autogrow:"",outlined:""},null,8,["modelValue","readonly"])):i("",!0)])])]),_:1})]),_:1}),a("div",Ye,[t(he,null,{default:v(()=>o[23]||(o[23]=[S("目前狀態")])),_:1,__:[23]}),l.value?(s(),c(Ue,{key:0,color:T(l.value.status.value),class:"q-mr-xs"},{default:v(()=>[S(q(ke(Se)[l.value.status.value]),1)]),_:1},8,["color"])):i("",!0)])])]),a("div",Xe,[t(U,{flat:"",style:{"max-width":"220px"}},{default:v(()=>[t(k,{class:"q-pa-none"},{default:v(()=>[t(Ne,null,{default:v(()=>[(s(!0),V(N,null,j(l.value?.status.history,(e,g)=>(s(),c(Ce,{key:g,subtitle:e.timestamp,title:me(e.action),color:T(e.action)},{default:v(()=>[e.by?(s(),V("div",Ze,"操作者："+q(e.by),1)):i("",!0),e.note?(s(),V("div",el,"備註："+q(e.note),1)):i("",!0)]),_:2},1032,["subtitle","title","color"]))),128))]),_:1}),l.value?.status.cancelReason?(s(),V("div",ll,[t(I,{name:"cancel",color:"negative",class:"q-mr-xs"}),o[24]||(o[24]=a("b",null,"取消說明：",-1)),S(q(l.value.status.cancelReason),1)])):i("",!0)]),_:1})]),_:1})])])]),_:1})]),_:1}),t(U,{class:"q-mt-md"},{default:v(()=>[t(C),t(k,null,{default:v(()=>[a("div",ol,[t(I,{name:"pets",class:"q-mr-xs"}),o[25]||(o[25]=S(" 寵物資訊 "))]),l.value?(s(!0),V(N,{key:0},j(l.value.pet,(e,g)=>(s(),V("div",{key:e.id,class:"q-mb-md q-pa-sm q-rounded bordered row q-col-gutter-md"},[a("div",tl,"寵物 "+q(g+1),1),a("div",al,[t(r,{label:"姓名",modelValue:e.name,"onUpdate:modelValue":u=>e.name=u,readonly:d.value,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),a("div",nl,[t(x,{label:"種類",modelValue:e.petType,"onUpdate:modelValue":u=>e.petType=u,options:$,readonly:d.value,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),a("div",dl,[t(r,{label:"品種",modelValue:e.petBreed,"onUpdate:modelValue":u=>e.petBreed=u,readonly:d.value,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),a("div",sl,[t(x,{label:"性別",modelValue:e.petGender,"onUpdate:modelValue":u=>e.petGender=u,options:L,readonly:d.value,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),a("div",ul,[t(r,{label:"年齡",type:"number",modelValue:e.petAge,"onUpdate:modelValue":u=>e.petAge=u,modelModifiers:{number:!0},readonly:d.value,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),a("div",il,[t(r,{label:"體重(kg)",type:"number",modelValue:e.petWeight,"onUpdate:modelValue":u=>e.petWeight=u,modelModifiers:{number:!0},readonly:d.value,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),a("div",rl,[t(r,{label:"寵物備註",modelValue:e.petNote,"onUpdate:modelValue":u=>e.petNote=u,readonly:d.value,type:"textarea",autogrow:"",outlined:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),a("div",ml,[t(r,{label:"健康提醒",modelValue:e.healthReminder,"onUpdate:modelValue":u=>e.healthReminder=u,readonly:d.value,type:"textarea",autogrow:"",outlined:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),a("div",cl,[t(x,{label:"是否攻擊",modelValue:e.isAttack,"onUpdate:modelValue":u=>e.isAttack=u,options:P,readonly:d.value,dense:"",outlined:"","emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),e.isAttack?(s(),V("div",vl,[t(r,{label:"攻擊行為備註",modelValue:e.attackNote,"onUpdate:modelValue":u=>e.attackNote=u,readonly:d.value,outlined:"",autogrow:""},null,8,["modelValue","onUpdate:modelValue","readonly"])])):i("",!0)]))),128)):i("",!0),t(U,{class:"q-mt-md"},{default:v(()=>[t(C),t(k,null,{default:v(()=>[a("div",yl,[t(I,{name:"spa",class:"q-mr-xs"}),o[26]||(o[26]=S(" 美容資訊 "))]),l.value?(s(),V(N,{key:0},[S(q(ee(l.value))+" ",1),(s(!0),V(N,null,j(l.value.pet,(e,g)=>(s(),V("div",{key:e.id,class:"q-mb-md q-pa-sm q-rounded bordered row q-col-gutter-md"},[a("div",pl,"寵物 "+q(g+1),1),a("div",gl,[t(r,{label:"姓名",modelValue:e.name,"onUpdate:modelValue":u=>e.name=u,readonly:d.value,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),a("div",Vl,[t(x,{label:"種類",modelValue:e.petType,"onUpdate:modelValue":u=>e.petType=u,options:$,readonly:d.value,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),a("div",fl,[t(r,{label:"品種",modelValue:e.petBreed,"onUpdate:modelValue":u=>e.petBreed=u,readonly:d.value,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),a("div",_l,[t(x,{label:"性別",modelValue:e.petGender,"onUpdate:modelValue":u=>e.petGender=u,options:L,readonly:d.value,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),a("div",bl,[t(r,{label:"年齡",type:"number",modelValue:e.petAge,"onUpdate:modelValue":u=>e.petAge=u,modelModifiers:{number:!0},readonly:d.value,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),a("div",kl,[t(r,{label:"體重(kg)",type:"number",modelValue:e.petWeight,"onUpdate:modelValue":u=>e.petWeight=u,modelModifiers:{number:!0},readonly:d.value,dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),a("div",hl,[t(r,{label:"寵物備註",modelValue:e.petNote,"onUpdate:modelValue":u=>e.petNote=u,readonly:d.value,type:"textarea",autogrow:"",outlined:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),a("div",Ul,[t(r,{label:"健康提醒",modelValue:e.healthReminder,"onUpdate:modelValue":u=>e.healthReminder=u,readonly:d.value,type:"textarea",autogrow:"",outlined:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),a("div",Sl,[t(x,{label:"是否攻擊",modelValue:e.isAttack,"onUpdate:modelValue":u=>e.isAttack=u,options:P,readonly:d.value,dense:"",outlined:"","emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),e.isAttack?(s(),V("div",ql,[t(r,{label:"攻擊行為備註",modelValue:e.attackNote,"onUpdate:modelValue":u=>e.attackNote=u,readonly:d.value,outlined:"",autogrow:""},null,8,["modelValue","onUpdate:modelValue","readonly"])])):i("",!0)]))),128))],64)):i("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),t(U,{class:"q-mt-md"},{default:v(()=>[t(C),t(k,null,{default:v(()=>[a("div",xl,[t(I,{name:"content_cut",class:"q-mr-xs"}),o[27]||(o[27]=S("服務項目 "))]),(s(!0),V(N,null,j(l.value?.services,e=>(s(),V("div",{key:e.petId,class:"q-mb-md"},[a("div",Il,q(X(e.petId)),1),t(qe,null,{default:v(()=>[(s(!0),V(N,null,j(e.items,g=>(s(),c(xe,{key:g.serviceId,class:"q-pa-none"},{default:v(()=>[t(W,null,{default:v(()=>[t(r,{modelValue:g.serviceName,"onUpdate:modelValue":u=>g.serviceName=u,readonly:d.value,label:"服務名稱",dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue","readonly"])]),_:2},1024),t(W,null,{default:v(()=>[t(r,{modelValue:g.price,"onUpdate:modelValue":u=>g.price=u,modelModifiers:{number:!0},readonly:d.value,label:"價格",dense:"",outlined:"",type:"number"},null,8,["modelValue","onUpdate:modelValue","readonly"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024),a("div",Bl," 小計：NT$ "+q(le(e.items)),1)]))),128)),a("div",Rl,[l.value?(s(),c(r,{key:0,class:"col-6",label:"折扣說明",modelValue:R.value,"onUpdate:modelValue":o[11]||(o[11]=e=>R.value=e),readonly:d.value,dense:"",outlined:""},null,8,["modelValue","readonly"])):i("",!0),l.value?(s(),c(r,{key:1,class:"col-6",label:"折扣金額",modelValue:w.value,"onUpdate:modelValue":o[12]||(o[12]=e=>w.value=e),modelModifiers:{number:!0},readonly:d.value,dense:"",outlined:"",type:"number"},null,8,["modelValue","readonly"])):i("",!0)]),a("div",wl,[a("div",Cl,[l.value?(s(),c(r,{key:0,label:"總金額",modelValue:E.value,"onUpdate:modelValue":o[13]||(o[13]=e=>E.value=e),modelModifiers:{number:!0},readonly:d.value,dense:"",outlined:"",type:"number"},null,8,["modelValue","readonly"])):i("",!0)]),a("div",Nl,[l.value?(s(),c(r,{key:0,label:"折扣後",modelValue:J.value,"onUpdate:modelValue":o[14]||(o[14]=e=>J.value=e),modelModifiers:{number:!0},readonly:d.value,dense:"",outlined:"",type:"number"},null,8,["modelValue","readonly"])):i("",!0)])])]),_:1})]),_:1}),t(U,{class:"q-mt-md"},{default:v(()=>[t(C),t(k,null,{default:v(()=>[a("div",Al,[t(I,{name:"credit_card",class:"q-mr-xs"}),o[28]||(o[28]=S("付款與流程 "))]),a("div",Ql,[a("div",Tl,[l.value?(s(),c(x,{key:0,label:"付款方式",modelValue:l.value.payment.method,"onUpdate:modelValue":o[15]||(o[15]=e=>l.value.payment.method=e),options:K,readonly:d.value,dense:"",outlined:""},null,8,["modelValue","readonly"])):i("",!0)]),a("div",jl,[l.value?(s(),c(x,{key:0,label:"付款狀態",modelValue:l.value.payment.status,"onUpdate:modelValue":o[16]||(o[16]=e=>l.value.payment.status=e),options:Y,readonly:d.value,dense:"",outlined:""},null,8,["modelValue","readonly"])):i("",!0)]),a("div",Dl,[l.value?(s(),c(r,{key:0,label:"美容師",modelValue:l.value.groomer.groomerName,"onUpdate:modelValue":o[17]||(o[17]=e=>l.value.groomer.groomerName=e),readonly:d.value,dense:"",outlined:""},null,8,["modelValue","readonly"])):i("",!0)]),a("div",El,[l.value?(s(),c(r,{key:0,label:"到店時間",modelValue:l.value.arriveTime,"onUpdate:modelValue":o[18]||(o[18]=e=>l.value.arriveTime=e),readonly:d.value,dense:"",outlined:""},null,8,["modelValue","readonly"])):i("",!0)]),a("div",Ol,[l.value?(s(),c(r,{key:0,label:"完成時間",modelValue:l.value.finishTime,"onUpdate:modelValue":o[19]||(o[19]=e=>l.value.finishTime=e),readonly:d.value,dense:"",outlined:""},null,8,["modelValue","readonly"])):i("",!0)])])]),_:1})]),_:1}),t(U,{class:"q-mt-md"},{default:v(()=>[t(C),t(k,{class:"row"},{default:v(()=>[l.value?(s(),c(r,{key:0,label:"下一次建議預約",modelValue:l.value.nextBookingSuggestion,"onUpdate:modelValue":o[20]||(o[20]=e=>l.value.nextBookingSuggestion=e),readonly:d.value,class:"col-6",dense:"",outlined:""},null,8,["modelValue","readonly"])):i("",!0)]),_:1})]),_:1})]),_:1}))}});export{Kl as default};
